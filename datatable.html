<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klubovi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css">
</head>
<body>
    <h1>Popis klubova</h1>
    <table id="kluboviTable" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Ime kluba</th>
                <th>Grad</th>
                <th>Nadimak</th>
                <th>Godina osnivanja</th>
                <th>Stadion (kapacitet)</th>
                <th>Trener</th>
                <th>Igrači</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function() {
            // Dohvaćanje podataka sa servera
            fetch('/klubovi')
                .then(response => response.json())
                .then(data => {
                    const klubovi = data.klubovi;

                    // Dodavanje podataka u tablicu
                    klubovi.forEach(klub => {
                        const igraci = klub.igraci.map(igrac => `${igrac.ime} ${igrac.prezime}`).join(', ');
                        const trener = `${klub.trener.ime} ${klub.trener.prezime}`;
                        const stadion = `${klub.stadion.naziv} (${klub.stadion.kapacitet})`;

                        $('#kluboviTable tbody').append(`
                            <tr>
                                <td>${klub.ime_kluba}</td>
                                <td>${klub.grad}</td>
                                <td>${klub.nadimak}</td>
                                <td>${klub.godina_osnivanja}</td>
                                <td>${stadion}</td>
                                <td>${trener}</td>
                                <td>${igraci}</td>
                            </tr>
                        `);
                    });

                    // Inicijalizacija DataTable
                    $('#kluboviTable').DataTable();
                })
                .catch(error => console.error('Greška prilikom dohvaćanja podataka:', error));
        });
    </script>
</body>
</html>
